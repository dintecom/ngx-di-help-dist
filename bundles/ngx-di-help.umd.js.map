{"version":3,"file":"ngx-di-help.umd.js","sources":["ng://ngx-di-help/lib/di-help.config.ts","ng://ngx-di-help/lib/api/di-help.service.ts","ng://ngx-di-help/lib/di-help/di-help.component.ts","ng://ngx-di-help/lib/di-help/di-help.module.ts","ng://ngx-di-help/lib/di-help-faq/di-help-faq.component.ts","ng://ngx-di-help/lib/di-help-faq/di-help-faq.module.ts"],"sourcesContent":["import { Provider, InjectionToken } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport abstract class DiHelpUrlResolver {\r\n    abstract resolve(): string | Observable<string>;\r\n}\r\n\r\nexport interface DiHelpConfig {\r\n    diHelpUrl?: string;\r\n    diHelpUrlResolver?: Provider;\r\n    cacheLifetimeSecond?: number,\r\n}\r\n\r\nexport const DI_HELP_URL_TOKEN = new InjectionToken<string>('DI_HELP_URL');\r\nexport const DI_HELP_CACHE_LIFETIME_TOKEN = new InjectionToken<string>('DI_HELP_CACHE_LIFETIME');\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, of, throwError, isObservable } from 'rxjs';\r\nimport { map, catchError, tap, share, finalize, flatMap } from 'rxjs/operators';\r\nimport { ArticleClientDto } from './article-client-dto';\r\nimport { DiHelpUrlResolver, DI_HELP_URL_TOKEN, DI_HELP_CACHE_LIFETIME_TOKEN } from '../di-help.config';\r\n\r\ninterface ICacheEntry {\r\n    article?: ArticleClientDto;\r\n    error?: any;\r\n}\r\n\r\nexport const cacheLifetimeSecondDefault = 30 * 60;\r\n\r\n@Injectable()\r\nexport class DiHelpService {\r\n\r\n    private readonly cacheLifetime: number;\r\n\r\n    private readonly cacheById: { [id: number]: ICacheEntry } = {};\r\n    private readonly requestCacheById: { [id: number]: Observable<ArticleClientDto> } = {};\r\n    private readonly cacheByUid: { [uid: string]: ICacheEntry } = {};\r\n    private readonly requestCacheByUid: { [uid: string]: Observable<ArticleClientDto> } = {};\r\n    private readonly cacheByUrl: { [url: string]: ICacheEntry } = {};\r\n    private readonly requestCacheByUrl: { [url: string]: Observable<ArticleClientDto> } = {};\r\n\r\n    private readonly diHelpUrl: Observable<string>;\r\n\r\n    constructor(\r\n        diHelpUrlResolver: DiHelpUrlResolver,\r\n        @Inject(DI_HELP_URL_TOKEN) diHelpUrl: string,\r\n        @Inject(DI_HELP_CACHE_LIFETIME_TOKEN) cacheLifetimeSecond: number,\r\n        private readonly http: HttpClient,\r\n    ) {\r\n        if (diHelpUrlResolver) {\r\n            const resolved = diHelpUrlResolver.resolve();\r\n            if (typeof resolved === 'string') {\r\n                this.diHelpUrl = of(resolved);\r\n            } else if (isObservable(resolved)) {\r\n                this.diHelpUrl = resolved;\r\n            } else {\r\n                throw Error('Not supported diHelpUrlResolver');\r\n            }\r\n        } else if (diHelpUrl) {\r\n            this.diHelpUrl = of(diHelpUrl);\r\n        } else {\r\n            throw Error('Please, configure diHelpUrl or diHelpUrlResolver');\r\n        }\r\n\r\n        this.cacheLifetime = cacheLifetimeSecond * 1000;\r\n    }\r\n\r\n    getArticleById(id: number): Observable<ArticleClientDto> {\r\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\r\n            this.cacheById,\r\n            this.requestCacheById,\r\n            id,\r\n            `${baseAddress}/api/Articles/GetArticleById/${id}`)));\r\n    }\r\n\r\n    getArticleByUrl(url: string): Observable<ArticleClientDto> {\r\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\r\n            this.cacheByUrl,\r\n            this.requestCacheByUrl,\r\n            url,\r\n            `${baseAddress}/api/Articles/GetArticleByUrl/?url=${encodeURIComponent(url)}`)));\r\n    }\r\n\r\n    getArticleByUid(siteUrl: string, uid: string): Observable<ArticleClientDto> {\r\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\r\n            this.cacheByUid,\r\n            this.requestCacheByUid,\r\n            uid,\r\n            `${baseAddress}/api/Articles/GetArticleByUid/?siteUrl=${encodeURIComponent(siteUrl)}&uid=${encodeURIComponent(uid)}`)));\r\n    }\r\n\r\n    getFaqBySiteId(id: number): Observable<ArticleClientDto[]> {\r\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.http\r\n            .get(`${baseAddress}/api/Articles/GetFaqBySiteId/${id}`, {\r\n                headers: { ignoreLoadingBar: '' }\r\n            })\r\n            .pipe(map(a => a as ArticleClientDto[]))));\r\n    }\r\n\r\n    getFaqBySiteUrl(siteUrl: string): Observable<ArticleClientDto[]> {\r\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.http\r\n            .get(`${baseAddress}/api/Articles/GetFaqBySiteUrl/?siteUrl=${encodeURIComponent(siteUrl)}`, {\r\n                headers: { ignoreLoadingBar: '' }\r\n            })\r\n            .pipe(map(a => a as ArticleClientDto[]))));\r\n    }\r\n\r\n    private cachedGet(\r\n        cache: { [id: number]: ICacheEntry } | { [url: string]: ICacheEntry },\r\n        requestCache: { [id: number]: Observable<ArticleClientDto> } | { [id: number]: Observable<ArticleClientDto> },\r\n        key: number | string,\r\n        httpUrl: string\r\n    ): Observable<ArticleClientDto> {\r\n        if (cache[key]) {\r\n            return cache[key].error ? throwError(cache[key].error) : of(cache[key].article);\r\n        }\r\n\r\n        if (requestCache[key]) return requestCache[key];\r\n\r\n        requestCache[key] = this.http\r\n            .get(httpUrl, {\r\n                headers: { ignoreLoadingBar: '' }\r\n            })\r\n            .pipe(\r\n                map(a => a as ArticleClientDto),\r\n                tap(a => {\r\n                    delete requestCache[key];\r\n                    cache[key] = {\r\n                        article: a,\r\n                    };\r\n                }),\r\n                catchError(e => {\r\n                    delete requestCache[key];\r\n                    cache[key] = {\r\n                        error: e,\r\n                    };\r\n                    return throwError(e);\r\n                }),\r\n                finalize(() => {\r\n                    setTimeout(() => delete cache[key], this.cacheLifetime);\r\n                }),\r\n                share());\r\n\r\n        return requestCache[key];\r\n    }\r\n}\r\n","import { Component, Input, OnDestroy, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { IArticleClientDto } from '../api/article-client-dto';\r\nimport { DiHelpService } from '../api/di-help.service';\r\n\r\n@Component({\r\n    selector: 'di-help',\r\n    templateUrl: './di-help.template.html',\r\n    styleUrls: ['./di-help.style.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DiHelpComponent implements OnDestroy {\r\n\r\n    article: IArticleClientDto;\r\n\r\n    private routerEventsSubscription: Subscription;\r\n    private _articleId: number;\r\n    private _articleUid: string;\r\n    private _byLocation: boolean;\r\n\r\n    @Input()\r\n    get articleId(): number {\r\n        return this._articleId;\r\n    }\r\n    set articleId(value: number) {\r\n        if (this.byLocation) throw Error('Do not use article-id with by-location');\r\n        if (this.articleUid) throw Error('Do not use article-id with article-uid');\r\n\r\n        if (this._articleId === value) return;\r\n\r\n        this._articleId = value;\r\n\r\n        if (!value) return;\r\n        this.diHelpService.getArticleById(value)\r\n            .subscribe(article => {\r\n                this.article = article;\r\n                this.changeDetector.markForCheck();\r\n            }, () => {\r\n                this.article = null;\r\n                this.changeDetector.markForCheck();\r\n            });\r\n    }\r\n\r\n    @Input()\r\n    get articleUid(): string {\r\n        return this._articleUid;\r\n    }\r\n    set articleUid(value: string) {\r\n        if (this.byLocation) throw Error('Do not use article-uid with by-location');\r\n        if (this.articleId) throw Error('Do not use article-uid with article-id');\r\n\r\n        if (this._articleUid === value) return;\r\n\r\n        this._articleUid = value;\r\n\r\n        if (!value) return;\r\n        this.diHelpService.getArticleByUid(location.origin, value)\r\n            .subscribe(article => {\r\n                this.article = article;\r\n                this.changeDetector.markForCheck();\r\n            }, () => {\r\n                this.article = null;\r\n                this.changeDetector.markForCheck();\r\n            });\r\n    }\r\n\r\n    @Input()\r\n    get byLocation(): boolean {\r\n        return this._byLocation;\r\n    }\r\n    set byLocation(value: boolean) {\r\n        if (this.articleId) throw Error('Do not use by-location with article-id');\r\n        if (this.articleUid) throw Error('Do not use by-location with article-uid');\r\n\r\n        if (this._byLocation === value) return;\r\n\r\n        this._byLocation = value;\r\n\r\n        if (value) {\r\n            this.updateFromLocation();\r\n            this.routerEventsSubscription = this.router.events\r\n                .pipe(filter(event => event instanceof NavigationEnd))\r\n                .subscribe(() => {\r\n                    this.updateFromLocation();\r\n                });\r\n        } else {\r\n            if (this.routerEventsSubscription) {\r\n                this.routerEventsSubscription.unsubscribe();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Input()\r\n    alwaysVisible: boolean = true;\r\n\r\n    @Input()\r\n    inline: boolean = false;\r\n\r\n    constructor(\r\n        private readonly diHelpService: DiHelpService,\r\n        private readonly router: Router,\r\n        private readonly changeDetector: ChangeDetectorRef\r\n    ) { }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.routerEventsSubscription) {\r\n            this.routerEventsSubscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n    private updateFromLocation(): void {\r\n        this.diHelpService.getArticleByUrl(location.origin + location.pathname)\r\n            .subscribe(article => {\r\n                this.article = article;\r\n                this.changeDetector.markForCheck();\r\n            }, () => {\r\n                this.article = null;\r\n                this.changeDetector.markForCheck();\r\n            });\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgxPopperModule } from 'ngx-popper';\r\nimport { DiHelpComponent } from './di-help.component';\r\nimport { DiHelpService, cacheLifetimeSecondDefault } from '../api/di-help.service';\r\nimport { DiHelpConfig, DI_HELP_URL_TOKEN, DI_HELP_CACHE_LIFETIME_TOKEN } from '../di-help.config';\r\nimport { DiHelpUrlResolver } from '../di-help.config';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        NgxPopperModule\r\n    ],\r\n    declarations: [\r\n        DiHelpComponent\r\n    ],\r\n    exports: [\r\n        DiHelpComponent\r\n    ]\r\n})\r\nexport class DiHelpModule {\r\n    static forRoot(config: DiHelpConfig): ModuleWithProviders {\r\n        return {\r\n            ngModule: DiHelpModule,\r\n            providers: [\r\n                config.diHelpUrlResolver || { provide: DiHelpUrlResolver, useValue: null },\r\n                {\r\n                    provide: DI_HELP_URL_TOKEN,\r\n                    useValue: config.diHelpUrl,\r\n                },\r\n                {\r\n                    provide: DI_HELP_CACHE_LIFETIME_TOKEN,\r\n                    useValue: isNaN(config.cacheLifetimeSecond) ? cacheLifetimeSecondDefault : config.cacheLifetimeSecond,\r\n                },\r\n                DiHelpService\r\n            ]\r\n        };\r\n    }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { IArticleClientDto } from '../api/article-client-dto';\r\nimport { DiHelpService } from '../api/di-help.service';\r\n\r\n@Component({\r\n    selector: 'di-help-faq',\r\n    templateUrl: './di-help-faq.template.html'\r\n})\r\nexport class DiHelpFaqComponent implements OnInit {\r\n\r\n    articles: IArticleClientDto[];\r\n\r\n    private _siteId: number;\r\n    private allArticles: IArticleClientDto[];\r\n\r\n    @Input()\r\n    get siteId(): number {\r\n        return this._siteId;\r\n    }\r\n    set siteId(value: number) {\r\n        if (this._siteId === value) return;\r\n\r\n        this._siteId = value;\r\n\r\n        if (!value) return;\r\n        this.diHelpService.getFaqBySiteId(value).subscribe(articles => {\r\n            this.allArticles = articles;\r\n            this.applyFilter();\r\n        }, () => {\r\n            this.allArticles = null;\r\n            this.applyFilter();\r\n        });\r\n    }\r\n\r\n    constructor(private readonly diHelpService: DiHelpService) { }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.siteId) {\r\n            this.diHelpService.getFaqBySiteUrl(location.origin).subscribe(articles => {\r\n                this.allArticles = articles;\r\n                this.applyFilter();\r\n            }, () => {\r\n                this.allArticles = null;\r\n                this.applyFilter();\r\n            });\r\n        }\r\n    }\r\n\r\n    applyFilter(filter: string = '') {\r\n        if (filter) {\r\n            const query = filter.toLowerCase();\r\n            this.articles = this.allArticles.filter(a =>\r\n                a.Name.toLowerCase().includes(query)\r\n                || a.ShortText.toLowerCase().includes(query)\r\n                || (a.DiHelpFiles && a.DiHelpFiles.some(f => f.Name.toLowerCase().includes(query)))\r\n                || (a.Links && a.Links.some(l => l.Name.toLowerCase().includes(query))));\r\n        } else {\r\n            this.articles = this.allArticles;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DiHelpFaqComponent } from './di-help-faq.component';\r\nimport { DiHelpService } from '../api/di-help.service';\r\nimport { DiHelpModule } from '../di-help/di-help.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        DiHelpModule\r\n    ],\r\n    declarations: [\r\n        DiHelpFaqComponent\r\n    ],\r\n    exports: [\r\n        DiHelpFaqComponent\r\n    ],\r\n    providers: [\r\n        DiHelpService\r\n    ]\r\n})\r\nexport class DiHelpFaqModule { }\r\n"],"names":["InjectionToken","of","isObservable","flatMap","map","throwError","tap","catchError","finalize","share","Injectable","Inject","HttpClient","filter","NavigationEnd","Component","ChangeDetectionStrategy","Router","ChangeDetectorRef","Input","NgModule","CommonModule","NgxPopperModule"],"mappings":"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"}