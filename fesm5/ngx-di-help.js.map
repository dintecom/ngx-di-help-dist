{"version":3,"file":"ngx-di-help.js","sources":["ng://ngx-di-help/lib/di-help.config.ts","ng://ngx-di-help/lib/api/di-help.service.ts","ng://ngx-di-help/lib/di-help/di-help.component.ts","ng://ngx-di-help/lib/di-help/di-help.module.ts","ng://ngx-di-help/lib/di-help-faq/di-help-faq.component.ts","ng://ngx-di-help/lib/di-help-faq/di-help-faq.module.ts"],"sourcesContent":["import { Provider, InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nexport abstract class DiHelpUrlResolver {\n    abstract resolve(): string | Observable<string>;\n}\n\nexport interface DiHelpConfig {\n    diHelpUrl?: string;\n    diHelpUrlResolver?: Provider;\n    cacheLifetimeSecond?: number,\n}\n\nexport const DI_HELP_URL_TOKEN = new InjectionToken<string>('DI_HELP_URL');\nexport const DI_HELP_CACHE_LIFETIME_TOKEN = new InjectionToken<string>('DI_HELP_CACHE_LIFETIME');\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of, throwError, isObservable } from 'rxjs';\nimport { map, catchError, tap, share, finalize, flatMap } from 'rxjs/operators';\nimport { ArticleClientDto } from './article-client-dto';\nimport { DiHelpUrlResolver, DI_HELP_URL_TOKEN, DI_HELP_CACHE_LIFETIME_TOKEN } from '../di-help.config';\n\ninterface ICacheEntry {\n    article?: ArticleClientDto;\n    error?: any;\n}\n\nexport const cacheLifetimeSecondDefault = 30 * 60;\n\n@Injectable()\nexport class DiHelpService {\n\n    private readonly cacheLifetime: number;\n\n    private readonly cacheById: { [id: number]: ICacheEntry } = {};\n    private readonly requestCacheById: { [id: number]: Observable<ArticleClientDto> } = {};\n    private readonly cacheByUid: { [uid: string]: ICacheEntry } = {};\n    private readonly requestCacheByUid: { [uid: string]: Observable<ArticleClientDto> } = {};\n    private readonly cacheByUrl: { [url: string]: ICacheEntry } = {};\n    private readonly requestCacheByUrl: { [url: string]: Observable<ArticleClientDto> } = {};\n\n    private readonly diHelpUrl: Observable<string>;\n\n    constructor(\n        diHelpUrlResolver: DiHelpUrlResolver,\n        @Inject(DI_HELP_URL_TOKEN) diHelpUrl: string,\n        @Inject(DI_HELP_CACHE_LIFETIME_TOKEN) cacheLifetimeSecond: number,\n        private readonly http: HttpClient,\n    ) {\n        if (diHelpUrlResolver) {\n            const resolved = diHelpUrlResolver.resolve();\n            if (typeof resolved === 'string') {\n                this.diHelpUrl = of(resolved);\n            } else if (isObservable(resolved)) {\n                this.diHelpUrl = resolved;\n            } else {\n                throw Error('Not supported diHelpUrlResolver');\n            }\n        } else if (diHelpUrl) {\n            this.diHelpUrl = of(diHelpUrl);\n        } else {\n            throw Error('Please, configure diHelpUrl or diHelpUrlResolver');\n        }\n\n        this.cacheLifetime = cacheLifetimeSecond * 1000;\n    }\n\n    getArticleById(id: number): Observable<ArticleClientDto> {\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\n            this.cacheById,\n            this.requestCacheById,\n            id,\n            `${baseAddress}/api/Articles/GetArticleById/${id}`)));\n    }\n\n    getArticleByUrl(url: string): Observable<ArticleClientDto> {\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\n            this.cacheByUrl,\n            this.requestCacheByUrl,\n            url,\n            `${baseAddress}/api/Articles/GetArticleByUrl/?url=${encodeURIComponent(url)}`)));\n    }\n\n    getArticleByUid(siteUrl: string, uid: string): Observable<ArticleClientDto> {\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.cachedGet(\n            this.cacheByUid,\n            this.requestCacheByUid,\n            uid,\n            `${baseAddress}/api/Articles/GetArticleByUid/?siteUrl=${encodeURIComponent(siteUrl)}&uid=${encodeURIComponent(uid)}`)));\n    }\n\n    getFaqBySiteId(id: number): Observable<ArticleClientDto[]> {\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.http\n            .get(`${baseAddress}/api/Articles/GetFaqBySiteId/${id}`, {\n                headers: { ignoreLoadingBar: '' }\n            })\n            .pipe(map(a => a as ArticleClientDto[]))));\n    }\n\n    getFaqBySiteUrl(siteUrl: string): Observable<ArticleClientDto[]> {\n        return this.diHelpUrl.pipe(flatMap(baseAddress => this.http\n            .get(`${baseAddress}/api/Articles/GetFaqBySiteUrl/?siteUrl=${encodeURIComponent(siteUrl)}`, {\n                headers: { ignoreLoadingBar: '' }\n            })\n            .pipe(map(a => a as ArticleClientDto[]))));\n    }\n\n    private cachedGet(\n        cache: { [id: number]: ICacheEntry } | { [url: string]: ICacheEntry },\n        requestCache: { [id: number]: Observable<ArticleClientDto> } | { [id: number]: Observable<ArticleClientDto> },\n        key: number | string,\n        httpUrl: string\n    ): Observable<ArticleClientDto> {\n        if (cache[key]) {\n            return cache[key].error ? throwError(cache[key].error) : of(cache[key].article);\n        }\n\n        if (requestCache[key]) return requestCache[key];\n\n        requestCache[key] = this.http\n            .get(httpUrl, {\n                headers: { ignoreLoadingBar: '' }\n            })\n            .pipe(\n                map(a => a as ArticleClientDto),\n                tap(a => {\n                    delete requestCache[key];\n                    cache[key] = {\n                        article: a,\n                    };\n                }),\n                catchError(e => {\n                    delete requestCache[key];\n                    cache[key] = {\n                        error: e,\n                    };\n                    return throwError(e);\n                }),\n                finalize(() => {\n                    setTimeout(() => delete cache[key], this.cacheLifetime);\n                }),\n                share());\n\n        return requestCache[key];\n    }\n}\n","import { Component, Input, OnDestroy, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { IArticleClientDto } from '../api/article-client-dto';\nimport { DiHelpService } from '../api/di-help.service';\n\n@Component({\n    selector: 'di-help',\n    templateUrl: './di-help.template.html',\n    styleUrls: ['./di-help.style.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DiHelpComponent implements OnDestroy {\n\n    article: IArticleClientDto;\n\n    private routerEventsSubscription: Subscription;\n    private _articleId: number;\n    private _articleUid: string;\n    private _byLocation: boolean;\n\n    @Input()\n    get articleId(): number {\n        return this._articleId;\n    }\n    set articleId(value: number) {\n        if (this.byLocation) throw Error('Do not use articleId with byLocation');\n        if (this.articleUid) throw Error('Do not use articleId with articleUid');\n\n        if (this._articleId === value) return;\n\n        this._articleId = value;\n\n        if (!value) return;\n        this.diHelpService.getArticleById(value)\n            .subscribe(article => {\n                this.article = article;\n                this.changeDetector.markForCheck();\n            }, () => {\n                this.article = null;\n                this.changeDetector.markForCheck();\n            });\n    }\n\n    @Input()\n    get articleUid(): string {\n        return this._articleUid;\n    }\n    set articleUid(value: string) {\n        if (this.byLocation) throw Error('Do not use articleUid with byLocation');\n        if (this.articleId) throw Error('Do not use articleUid with article-id');\n\n        if (this._articleUid === value) return;\n\n        this._articleUid = value;\n\n        if (!value) return;\n        this.diHelpService.getArticleByUid(location.origin, value)\n            .subscribe(article => {\n                this.article = article;\n                this.changeDetector.markForCheck();\n            }, () => {\n                this.article = null;\n                this.changeDetector.markForCheck();\n            });\n    }\n\n    @Input()\n    get byLocation(): boolean {\n        return this._byLocation;\n    }\n    set byLocation(value: boolean) {\n        if (this.articleId) throw Error('Do not use byLocation with articleId');\n        if (this.articleUid) throw Error('Do not use byLocation with articleUid');\n\n        if (this._byLocation === value) return;\n\n        this._byLocation = value;\n\n        if (value) {\n            this.updateFromLocation();\n            this.routerEventsSubscription = this.router.events\n                .pipe(filter(event => event instanceof NavigationEnd))\n                .subscribe(() => {\n                    this.updateFromLocation();\n                });\n        } else {\n            if (this.routerEventsSubscription) {\n                this.routerEventsSubscription.unsubscribe();\n            }\n        }\n    }\n\n    @Input()\n    alwaysVisible: boolean = true;\n\n    @Input()\n    inline: boolean = false;\n\n    constructor(\n        private readonly diHelpService: DiHelpService,\n        private readonly router: Router,\n        private readonly changeDetector: ChangeDetectorRef\n    ) { }\n\n    ngOnDestroy(): void {\n        if (this.routerEventsSubscription) {\n            this.routerEventsSubscription.unsubscribe();\n        }\n    }\n\n    private updateFromLocation(): void {\n        this.diHelpService.getArticleByUrl(location.origin + location.pathname)\n            .subscribe(article => {\n                this.article = article;\n                this.changeDetector.markForCheck();\n            }, () => {\n                this.article = null;\n                this.changeDetector.markForCheck();\n            });\n    }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxPopperModule } from 'ngx-popper';\nimport { DiHelpComponent } from './di-help.component';\nimport { DiHelpService, cacheLifetimeSecondDefault } from '../api/di-help.service';\nimport { DiHelpConfig, DI_HELP_URL_TOKEN, DI_HELP_CACHE_LIFETIME_TOKEN } from '../di-help.config';\nimport { DiHelpUrlResolver } from '../di-help.config';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        NgxPopperModule\n    ],\n    declarations: [\n        DiHelpComponent\n    ],\n    exports: [\n        DiHelpComponent\n    ]\n})\nexport class DiHelpModule {\n    static forRoot(config: DiHelpConfig): ModuleWithProviders {\n        return {\n            ngModule: DiHelpModule,\n            providers: [\n                config.diHelpUrlResolver || { provide: DiHelpUrlResolver, useValue: null },\n                {\n                    provide: DI_HELP_URL_TOKEN,\n                    useValue: config.diHelpUrl,\n                },\n                {\n                    provide: DI_HELP_CACHE_LIFETIME_TOKEN,\n                    useValue: isNaN(config.cacheLifetimeSecond) ? cacheLifetimeSecondDefault : config.cacheLifetimeSecond,\n                },\n                DiHelpService\n            ]\n        };\n    }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { IArticleClientDto } from '../api/article-client-dto';\nimport { DiHelpService } from '../api/di-help.service';\n\n@Component({\n    selector: 'di-help-faq',\n    templateUrl: './di-help-faq.template.html'\n})\nexport class DiHelpFaqComponent implements OnInit {\n\n    articles: IArticleClientDto[];\n\n    private _siteId: number;\n    private allArticles: IArticleClientDto[];\n\n    @Input()\n    get siteId(): number {\n        return this._siteId;\n    }\n    set siteId(value: number) {\n        if (this._siteId === value) return;\n\n        this._siteId = value;\n\n        if (!value) return;\n        this.diHelpService.getFaqBySiteId(value).subscribe(articles => {\n            this.allArticles = articles;\n            this.applyFilter();\n        }, () => {\n            this.allArticles = null;\n            this.applyFilter();\n        });\n    }\n\n    constructor(private readonly diHelpService: DiHelpService) { }\n\n    ngOnInit(): void {\n        if (!this.siteId) {\n            this.diHelpService.getFaqBySiteUrl(location.origin).subscribe(articles => {\n                this.allArticles = articles;\n                this.applyFilter();\n            }, () => {\n                this.allArticles = null;\n                this.applyFilter();\n            });\n        }\n    }\n\n    applyFilter(filter: string = '') {\n        if (filter) {\n            const query = filter.toLowerCase();\n            this.articles = this.allArticles.filter(a =>\n                a.Name.toLowerCase().includes(query)\n                || a.ShortText.toLowerCase().includes(query)\n                || (a.DiHelpFiles && a.DiHelpFiles.some(f => f.Name.toLowerCase().includes(query)))\n                || (a.Links && a.Links.some(l => l.Name.toLowerCase().includes(query))));\n        } else {\n            this.articles = this.allArticles;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DiHelpFaqComponent } from './di-help-faq.component';\nimport { DiHelpService } from '../api/di-help.service';\nimport { DiHelpModule } from '../di-help/di-help.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        DiHelpModule\n    ],\n    declarations: [\n        DiHelpFaqComponent\n    ],\n    exports: [\n        DiHelpFaqComponent\n    ],\n    providers: [\n        DiHelpService\n    ]\n})\nexport class DiHelpFaqModule { }\n"],"names":[],"mappings":"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"}